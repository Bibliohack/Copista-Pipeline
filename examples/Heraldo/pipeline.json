{
    "name": "Heraldo - Detección de Bordes y Líneas",
    "description": "Pipeline de detección de bordes de página - Heraldo",
    "version": "1.1",
    "filters": {
        "resize": {
            "filter_name": "Resize",
            "description": "Redimensionar imagen inicial",
            "inputs": {},
            "comment": "El filtro 0 no tiene inputs de otros filtros, trabaja con la imagen original"
        },
        "contrast": {
            "filter_name": "BrightnessContrast",
            "description": "Ajustar brillo y contraste",
            "inputs": {
                "input_image": "resize.resized_image"
            },
            "comment": "Toma la imagen redimensionada del filtro 0"
        },
        "gray": {
            "filter_name": "Grayscale",
            "description": "Convertir a escala de grises",
            "inputs": {
                "input_image": "contrast.adjusted_image"
            }
        },
        "blur": {
            "filter_name": "GaussianBlur",
            "description": "Aplicar desenfoque para reducir ruido",
            "inputs": {
                "input_image": "gray.grayscale_image"
            }
        },
        "canny_border": {
            "filter_name": "CannyEdge",
            "description": "Detectar bordes",
            "inputs": {
                "input_image": "blur.blurred_image"
            }
        },
        "hough_border": {
            "filter_name": "HoughLines",
            "description": "Detectar líneas",
            "inputs": {
                "edge_image": "canny_border.edge_image",
                "base_image": "resize.resized_image"
            },
            "comment": "Usar method=1 (probabilístico) para obtener formato x1,y1,x2,y2"
        },
        "show_hough": {
            "filter_name": "OverlayLines",
            "description": "Visualizar líneas sobre imagen original",
            "inputs": {
                "base_image": "resize.resized_image",
                "lines_data": "hough_border.lines_data"
            },
            "comment": "Este filtro combina datos de múltiples filtros anteriores"
        },
        "angle_classify": {
            "filter_name": "ClassifyLinesByAngle",
            "description": "Clasificar líneas en horizontales, verticales y otras",
            "inputs": {
                "lines_data": "hough_border.lines_data",
                "base_image": "resize.resized_image"
            },
            "comment": "Separa las líneas según su ángulo respecto a horizontal/vertical"
        },
        "set_borders": {
            "filter_name": "SelectBorderLines",
            "description": "Seleccionar las 4 líneas extremas de borde",
            "inputs": {
            	"base_image": "resize.resized_image",
                "horizontal_lines": "angle_classify.horizontal_lines",
                "vertical_lines": "angle_classify.vertical_lines"
            },
            "comment": "Aplica lógica de cluster y margen para seleccionar top/bottom/left/right"
        },
        "quad_corners": {
            "filter_name": "CalculateQuadCorners",
            "description": "Calcular las 4 esquinas del polígono",
            "inputs": {
            	"base_image": "resize.resized_image",
                "selected_lines": "set_borders.selected_lines",
                "selection_metadata": "set_borders.selection_metadata"
            },
            "comment": "Intersecta las líneas seleccionadas para obtener los 4 vértices"
        },
        "scale_to_original": {
            "filter_name": "ScaleQuadCorners",
            "inputs": {
                "corners": "quad_corners.corners",
                "corners_metadata": "quad_corners.corners_metadata",
                "target_image": "original.image"
            }
        },
        "canny_skew": {
            "filter_name": "CannyEdge",
            "description": "Detectar bordes",
            "inputs": { "input_image": "original.image" }
        },
        "hough_skew": {
            "filter_name": "HoughLines",
            "description": "Detectar líneas",
            "inputs": {
                "edge_image": "canny_skew.edge_image",
        	"base_image": "original.image"
            },
            "comment": "Usar method=1 (probabilístico) para obtener formato x1,y1,x2,y2"
        },
        "get_skew_angle": {
        	"filter_name": "DetectPageSkew",
        	"inputs": {
         		"lines_data": "hough_skew.lines_data",
         		"base_image": "original.image"
        	}
        }
    }
}
